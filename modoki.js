const modoki=l=>{l+="\n";let e="",i=[0,[]],f=(e,l,i=0)=>e.indexOf(l,i),o=(e,l)=>e.startsWith(l),r=(e,l)=>`<${l}>${c(e)}</${l}>`,s=(e,l,i="")=>{var s=l.length,l=f(e,l,s+1);return[l+s,r(e.slice(s,l),i)]},c=r=>{let c="",n=[0,0],e=["*","`","~~","__","["];for(;0<r.length;){if(o(r,"*"))n="*"==r[1]?s(r,"**","b"):s(r,"*","em"),c+=n[1];else if(o(r,"`"))n=s(r,"`","code"),c+=n[1];else if(o(r,"~~"))n="~"==r[2]?s(r,"~~~","pre"):s(r,"~~","strike"),c+=n[1];else if(o(r,"__"))n=s(r,"__","u"),c+=n[1];else if(o(r,"["))if("["==r[1])n[0]=f(r,"]]")+2,c+=`<iframe src="${r.slice(2,n[0]-2)}"></iframe>`;else{let e=f(r,"]"),l=r.slice(1,e),i=r.slice(f(r,"(")+1,f(r,")"),e+1),s="",t=f(i,'"')+1;1<t&&(s=i.slice(t,f(i,'"',t)),i=i.slice(0,f(i," "))),c+=`<a href="${i}"title="${s}"target="_blank"rel="noopener noreferrer">${l}</a>`,n[0]=f(r,")")+1}else{let l=r.length;e.forEach(e=>l=l>f(r,e)&&-1<f(r,e)?f(r,e):l),c+=r.slice(0,l),n[0]=l}r=r.slice(n[0])}return c},t=(l,i,s=[])=>{let t="";for(let e=1;e<l.length-1;e++)t+=`<${i} style="text-align:${void 0===s[e]||2<s[e].split(":").length?"center":o(s[e],":")?"left":"right"}">${c(l[e])}</${i}>`;return r(t,"tr")},n=["#","1. ","- ","|","++","> "],a,h,$,g;for(;0<l.length;){if(o(l,"#"))$=f(l," "),h=f(l,"\n")+1,$=6<$?6:$,e+=r(l.slice($+1,h-1),"h"+$),i[0]=h;else if(o(l,"++"))i[0]=f(l,"\n")+1,a=l.slice(2,i[0]-1).split("|"),e+=r(r(a[0],"summary")+a[1],"details");else if(o(l,"- - -"))i[0]=5,e+="<hr>";else if(o(l,"- ")||o(l,"1. ")){for(g=o(l,"- ")?["- ","ul"]:["1. ","ol"],e+=`<${g[1]}>`;o(l,g[0]);)e+=r(l.slice(f(l," ")+1,f(l,"\n")),"li"),l=l.slice(f(l,"\n")+1);e+=`</${g[1]}>`,i[0]=0}else if(o(l,"|")){for(h=f(l,"\n"),g=l.slice(0,h).split("|"),e+="<table>"+t(g,"th"),l=l.slice(h+1),h=f(l,"\n"),a=l.slice(0,h).split("|"),l=l.slice(h+1);o(l,"|");)h=f(l,"\n"),g=l.slice(0,h).split("|"),e+=t(g,"td",a),l=l.slice(h+1);e+="</table>",i[0]=0}else if(o(l,"> ")){for(g="";o(l,"> ");)h=f(l,"\n")+1,g+=l.slice(2,h),l=l.slice(h);e+=r(g,"blockquote"),i[0]=0}else h=l.length,n.forEach(e=>h=h>f(l,e)&&-1<f(l,e)?f(l,e):h),e+=c(l.slice(0,h)),i[0]=h;l=l.slice(i[0])}return e.replace(/\n/g,"<br>")};